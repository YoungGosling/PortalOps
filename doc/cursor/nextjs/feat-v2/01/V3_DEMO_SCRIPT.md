# PortalOps v3.0 Frontend - Demo Script

## 演示准备

### 前置条件
1. ✅ 后端服务运行在 http://localhost:8000
2. ✅ 前端服务运行在 http://localhost:3000
3. ✅ 有 Admin 权限的测试账号
4. ✅ 数据库中有一些服务和产品

### 启动服务

```bash
# Terminal 1: 启动后端
cd /home/evanzhang/EnterpriseProjects/PortalOps/server
python -m uvicorn app.main:app --reload

# Terminal 2: 启动前端
cd /home/evanzhang/EnterpriseProjects/PortalOps/nextjs
pnpm dev
```

---

## 演示流程

### 场景 1: 部门管理 (5分钟)

#### 步骤 1.1: 访问部门管理页面
1. 以 Admin 用户登录系统
2. 点击左侧边栏 **Administration** 展开菜单
3. 点击 **Dept Master File**
4. 看到部门管理主页面

**展示要点**:
- 清晰的页面标题和描述
- "Add Department" 按钮醒目
- 如果有数据，显示表格列表

#### 步骤 1.2: 创建新部门
1. 点击 **Add Department** 按钮
2. 在对话框中输入部门名称，例如 "Engineering"
3. 点击 **Next: Assign Products** 切换到产品分配标签
4. 展示新的 **ServiceProductSelector** 组件：
   - 树形结构显示服务
   - 每个服务下显示产品
   - 可以展开/折叠
5. 选择一个服务（所有产品自动被选中）✨
6. 取消选择其中一个产品（服务也被取消选中）✨
7. 重新选择需要的产品
8. 点击 **Create Department**
9. 看到成功提示

**展示要点**:
- 分步表单设计合理
- 产品选择直观易用
- 级联选择逻辑正确
- Toast 反馈及时

#### 步骤 1.3: 查看部门产品
1. 找到刚创建的部门
2. 点击行首的展开按钮（右箭头图标）
3. 看到产品列表展开显示
4. 产品以 Badge 形式美观展示
5. 显示服务名称辅助信息

**展示要点**:
- 按需加载产品（性能优化）
- 加载状态提示
- 产品展示清晰美观

#### 步骤 1.4: 编辑部门
1. 点击部门行的 **Edit** 按钮
2. 修改部门名称
3. 切换到 "Product Assignments" 标签
4. 看到当前选中的产品已正确加载✨
5. 修改产品选择
6. 点击 **Update Department**
7. 展开查看，确认更新成功

**展示要点**:
- 编辑时正确加载现有数据
- 可以单独更新名称或产品
- 更新后立即反映

#### 步骤 1.5: 删除部门（可选）
1. 点击某个部门的 **Delete** 按钮
2. 看到警告对话框
3. 阅读警告信息（产品分配会被删除）
4. 点击 **Delete Department** 确认
5. 部门从列表中消失

**展示要点**:
- 删除前有明确警告
- 说明影响范围
- 操作不可逆的提示

---

### 场景 2: 增强的用户管理 (5分钟)

#### 步骤 2.1: 访问用户目录
1. 点击左侧边栏 **Employee Directory**
2. 看到用户卡片列表
3. 观察卡片上的信息

**展示要点**:
- 卡片设计美观
- 信息层次清晰

#### 步骤 2.2: 查看用户新字段
1. 找到一个有完整信息的用户卡片
2. 指出新显示的字段：
   - 📍 Department (Building2 图标)
   - 💼 Position (Briefcase 图标)
   - 📅 Hire Date (Calendar 图标，格式化显示)

**展示要点**:
- 新字段与现有设计融合良好
- 图标使用恰当
- 日期格式友好

#### 步骤 2.3: 创建新用户
1. 点击右上角 **Add User** 按钮
2. 填写基本信息：
   - Name: "Alice Johnson"
   - Email: "alice@example.com"
3. 填写新字段：
   - Department: "Engineering"
   - Position: "Software Engineer"
   - Hire Date: 选择今天的日期
4. 向下滚动到产品分配部分
5. **重点展示** ServiceProductSelector 组件：
   - 所有服务默认展开
   - 清晰的树形层次
   - 选择服务 → 所有产品被选
   - 取消产品 → 服务也取消
   - 部分选中状态的视觉反馈✨
6. 选择一些产品
7. 点击 **Create User**
8. 看到成功提示
9. 在列表中找到新用户，验证信息正确

**展示要点**:
- 表单布局合理（2列网格）
- 新字段集成自然
- 新组件替换旧UI
- 用户体验提升明显

#### 步骤 2.4: 编辑用户
1. 点击某个用户的 **Edit** 按钮
2. 看到所有字段都已填充
3. **重点展示** 离职日期字段：
   - 只在编辑模式显示✨
   - 创建时不显示✨
   - 可选填写
4. 修改 Position
5. 看到产品选择器正确加载了已分配的产品
6. 修改产品分配
7. 点击 **Update User**
8. 验证更新成功

**展示要点**:
- 编辑时所有数据正确加载
- Resignation Date 的显示逻辑正确
- 可以更新任何字段
- 产品选择器状态管理正确

---

### 场景 3: 组件复用展示 (3分钟)

#### 对比展示
1. 打开用户编辑对话框
2. 展示产品选择器的外观和行为
3. 关闭对话框
4. 打开部门编辑对话框
5. 展示**完全相同**的产品选择器
6. 强调：
   - 同一个组件在两处使用✨
   - 行为一致
   - 维护简单
   - 代码复用

**展示要点**:
- 组件化架构的优势
- 一致的用户体验
- 可维护性和可扩展性

---

### 场景 4: 权限控制 (2分钟)

#### 步骤 4.1: Admin 视角
1. 以 Admin 身份，展示可见的菜单项：
   - ✅ Dashboard
   - ✅ Inbox
   - ✅ Service Provider
   - ✅ Product Inventory
   - ✅ Payment Register
   - ✅ Employee Directory
   - ✅ Administration (展开)
     - ✅ Dept Master File
     - ✅ User Administration
     - ✅ Master Files

#### 步骤 4.2: 非 Admin 视角（如果可以演示）
1. 登出
2. 以非 Admin 用户登录
3. 展示受限的菜单：
   - ❌ 没有 Inbox
   - ❌ 没有 Employee Directory
   - ❌ 没有 Administration 菜单
4. 尝试访问 `/admin/departments`
5. 看到友好的拒绝提示

**展示要点**:
- 清晰的权限分级
- 友好的错误提示
- 安全性得到保障

---

## 技术亮点

### 1. 可复用的 ServiceProductSelector 组件
```typescript
// 在多个地方使用同一个组件
<ServiceProductSelector
  services={services}
  selectedProductIds={selectedProductIds}
  onSelectionChange={setSelectedProductIds}
  loading={loadingServices}
/>
```

**特点**:
- 树形结构，层次清晰
- 级联选择逻辑
- 部分选中状态
- 只返回产品 ID（符合 PRD）
- 完全可复用

### 2. 响应式设计
- 移动端友好
- 暗色模式支持
- 流畅的动画过渡
- 合理的加载状态

### 3. 用户体验优化
- Toast 反馈
- 加载状态
- 空状态提示
- 确认对话框
- 友好的错误信息

### 4. 代码质量
- TypeScript 类型安全
- 无 Linting 错误
- 组件化架构
- 清晰的代码组织

---

## 演示话术建议

### 开场白
"今天我将演示 PortalOps v3.0 的新功能。v3.0 主要增强了用户和部门管理功能，引入了一个强大的产品选择组件，并添加了部门级别的产品分配能力。"

### 部门管理
"首先，让我们看看新的部门管理功能。管理员现在可以创建部门，并为每个部门预分配一套默认产品。这里最有意思的是这个产品选择器..."

### 产品选择器
"注意这个树形结构的设计。当我选择一个服务时，它下面的所有产品都会自动被选中。这就是我们实现的级联选择逻辑。如果我取消其中一个产品，服务的选中状态也会相应改变。这种交互方式非常直观..."

### 用户管理增强
"用户管理也得到了增强。我们添加了职位、入职日期等字段，让员工信息更完整。更重要的是，我们在用户表单中也使用了同样的产品选择器，保证了一致的用户体验..."

### 组件复用
"你可能注意到了，用户表单和部门表单中的产品选择器看起来完全一样。这是因为我们设计了一个可复用的组件。这不仅保证了一致性，也大大提高了代码的可维护性..."

### 结束语
"v3.0 的所有新功能都已经过充分测试，没有 linting 错误，并且完全符合产品需求文档。前端与后端 v3 API 完美集成，可以投入生产使用。"

---

## 常见问题准备

### Q1: 为什么离职日期不在创建时显示？
A: 根据产品需求文档，离职日期应该默认为空，并且不应该在默认情况下显示。只有在编辑用户时，管理员需要设置离职日期时才显示这个字段。

### Q2: 部门产品分配如何影响用户？
A: 当用户属于某个部门时，他们会自动继承该部门的默认产品。但是，管理员仍然可以为单个用户手动覆盖产品分配。

### Q3: 如果我想添加更多字段怎么办？
A: 系统采用模块化设计，添加新字段非常容易。只需要：
1. 更新类型定义
2. 更新 API 调用
3. 在表单中添加输入字段
4. 在列表中显示新字段

### Q4: 性能如何？
A: 我们实施了多项优化：
- 产品列表按需加载
- 合理的缓存策略
- 避免不必要的渲染
- 响应式加载状态

### Q5: 移动端体验如何？
A: 所有新功能都采用响应式设计，在移动设备上同样可以流畅使用。

---

## 演示检查清单

演示前请确认：

- [ ] 后端服务正常运行
- [ ] 前端服务正常运行
- [ ] 有测试用的 Admin 账号
- [ ] 数据库中有一些服务和产品
- [ ] 浏览器开发者工具已关闭（避免分散注意力）
- [ ] 已准备好演示数据
- [ ] 网络连接稳定
- [ ] 屏幕共享设置正确

---

## 备用演示方案

如果遇到技术问题：

1. **后端无响应**: 展示前端 UI 和组件设计
2. **创建失败**: 演示编辑现有数据
3. **网络问题**: 使用静态截图展示

---

**演示时长**: 15-20 分钟
**难度**: 中等
**受众**: 产品经理、技术团队、客户
**准备时间**: 10 分钟

---

**版本**: v3.0
**更新日期**: 2025年10月22日

